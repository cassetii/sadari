<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sadari.id - Ruang Aman untuk Dirimu</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --accent-color: #f093fb;
            --success-color: #4ecdc4;
            --warning-color: #feca57;
            --danger-color: #ff6b6b;
            --text-primary: #2d3436;
            --text-secondary: #636e72;
            --text-light: #b2bec3;
            --bg-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --bg-light: #f8f9fa;
            --card-bg: #ffffff;
            --glass-bg: rgba(255, 255, 255, 0.25);
            --shadow-soft: 0 8px 32px rgba(102, 126, 234, 0.15);
            --shadow-medium: 0 12px 40px rgba(102, 126, 234, 0.2);
            --shadow-strong: 0 16px 48px rgba(102, 126, 234, 0.25);
            --border-radius: 24px;
            --border-radius-sm: 16px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--bg-gradient);
            color: var(--text-primary);
            min-height: 100vh;
            padding-bottom: 100px;
        }

        .navbar {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            padding: 1rem 0;
        }

        .navbar-brand {
            font-weight: 700;
            font-size: 1.5rem;
            background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-link {
            color: var(--text-primary) !important;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .nav-link:hover {
            color: var(--primary-color) !important;
        }

        .hero-section {
            padding: 120px 0 60px 0;
            text-align: center;
            position: relative;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><radialGradient id="g" cx="50%" cy="50%" r="50%"><stop offset="0%" style="stop-color:rgba(255,255,255,0.1)"/><stop offset="100%" style="stop-color:rgba(255,255,255,0)"/></radialGradient></defs><circle cx="20" cy="20" r="2" fill="url(%23g)"/><circle cx="80" cy="30" r="1.5" fill="url(%23g)"/><circle cx="40" cy="70" r="1" fill="url(%23g)"/><circle cx="90" cy="80" r="2.5" fill="url(%23g)"/><circle cx="10" cy="60" r="1.2" fill="url(%23g)"/></svg>') repeat;
            opacity: 0.5;
            animation: float 20s ease-in-out infinite;
        }

        .hero-title {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 1rem;
            color: white;
            text-shadow: 0 4px 12px rgba(0,0,0,0.1);
            line-height: 1.2;
        }

        .hero-subtitle {
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 2rem;
            font-weight: 400;
            line-height: 1.6;
        }

        .welcome-message {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-radius: var(--border-radius);
            padding: 24px;
            margin: 30px 0;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: var(--shadow-soft);
        }

        .welcome-message h4 {
            color: white;
            font-weight: 600;
            margin-bottom: 12px;
        }

        .welcome-message p {
            color: rgba(255, 255, 255, 0.8);
            margin: 0;
            font-size: 0.95rem;
        }

        .feature-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 28px 20px;
            margin: 16px 0;
            box-shadow: var(--shadow-soft);
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            border: none;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.4s ease;
        }

        .feature-card:hover::before {
            transform: scaleX(1);
        }

        .feature-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-medium);
        }

        .feature-card:active {
            transform: translateY(-4px);
        }

        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 16px;
            background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: block;
        }

        .feature-card h4 {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--text-primary);
        }

        .feature-card p {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.5;
            margin: 0;
        }

        .panic-button {
            position: fixed;
            bottom: 24px;
            right: 24px;
            width: 64px;
            height: 64px;
            background: linear-gradient(135deg, var(--danger-color), #ff8787);
            border-radius: 50%;
            border: none;
            color: white;
            font-size: 1.4rem;
            box-shadow: var(--shadow-medium);
            z-index: 1000;
            animation: pulse 3s infinite;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .panic-button:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow-strong);
        }

        .panic-button:active {
            transform: scale(0.95);
        }

        @keyframes pulse {
            0%, 100% { 
                box-shadow: var(--shadow-medium), 0 0 0 0 rgba(255, 107, 107, 0.7);
            }
            50% { 
                box-shadow: var(--shadow-medium), 0 0 0 10px rgba(255, 107, 107, 0);
            }
        }

        .modal-content {
            border-radius: var(--border-radius);
            border: none;
            box-shadow: var(--shadow-strong);
            overflow: hidden;
        }

        .modal-header {
            background: var(--bg-gradient);
            color: white;
            border: none;
            padding: 24px 24px 16px 24px;
        }

        .modal-body {
            padding: 24px;
            background: var(--card-bg);
        }

        .breathing-circle {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--success-color), var(--primary-color));
            margin: 24px auto;
            animation: breathe 4s ease-in-out infinite;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 1.1rem;
            box-shadow: var(--shadow-soft);
        }

        @keyframes breathe {
            0%, 100% { 
                transform: scale(1);
                box-shadow: var(--shadow-soft);
            }
            50% { 
                transform: scale(1.15);
                box-shadow: var(--shadow-medium);
            }
        }

        .emotion-tracker, .journal-section, .game-section, .challenge-section {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 28px 24px;
            margin: 20px 0;
            box-shadow: var(--shadow-soft);
        }

        .emotion-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin: 24px 0;
        }

        .emotion-btn {
            padding: 16px 12px;
            border: 2px solid var(--primary-color);
            background: transparent;
            color: var(--primary-color);
            border-radius: var(--border-radius-sm);
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            cursor: pointer;
            font-weight: 500;
            font-size: 0.9rem;
            position: relative;
            overflow: hidden;
        }

        .emotion-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .emotion-btn:hover::before {
            left: 100%;
        }

        .emotion-btn:hover, .emotion-btn.active {
            background: var(--bg-gradient);
            color: white;
            border-color: transparent;
            transform: translateY(-2px);
            box-shadow: var(--shadow-soft);
        }

        .journal-textarea {
            width: 100%;
            min-height: 160px;
            border: 2px solid #e9ecef;
            border-radius: var(--border-radius-sm);
            padding: 20px;
            font-family: 'Poppins', sans-serif;
            resize: vertical;
            background: #f8f9fa;
            transition: all 0.3s ease;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .journal-textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            background: white;
        }

        .game-canvas {
            width: 100%;
            height: 300px;
            border-radius: var(--border-radius-sm);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            position: relative;
            overflow: hidden;
            cursor: pointer;
            box-shadow: inset var(--shadow-soft);
        }

        .floating-star {
            position: absolute;
            animation: float 4s ease-in-out infinite;
            cursor: pointer;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
            transition: transform 0.3s ease;
        }

        .floating-star:hover {
            transform: scale(1.2);
        }

        @keyframes float {
            0%, 100% { 
                transform: translateY(0px) rotate(0deg);
            }
            33% { 
                transform: translateY(-8px) rotate(5deg);
            }
            66% { 
                transform: translateY(-4px) rotate(-5deg);
            }
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 16px;
            margin: 24px 0;
        }

        .gallery-item {
            border-radius: var(--border-radius-sm);
            overflow: hidden;
            transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        .gallery-item:hover {
            transform: translateY(-4px);
        }

        .affirmation-card {
            background: var(--bg-gradient);
            color: white;
            padding: 28px 24px;
            border-radius: var(--border-radius-sm);
            text-align: center;
            margin: 12px 0;
            box-shadow: var(--shadow-soft);
            position: relative;
            overflow: hidden;
        }

        .affirmation-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: shimmer 3s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(180deg); }
        }

        .affirmation-card h5 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 12px;
            position: relative;
            z-index: 1;
        }

        .affirmation-card p {
            font-size: 0.9rem;
            opacity: 0.9;
            line-height: 1.5;
            margin: 0;
            position: relative;
            z-index: 1;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin: 24px 0;
        }

        .stat-card {
            background: var(--card-bg);
            padding: 24px 16px;
            border-radius: var(--border-radius-sm);
            text-align: center;
            box-shadow: var(--shadow-soft);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-4px);
        }

        .stat-number {
            font-size: 2.2rem;
            font-weight: 800;
            background: var(--bg-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1;
            margin-bottom: 8px;
        }

        .stat-card p {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin: 0;
            font-weight: 500;
        }

        .btn-primary {
            background: var(--bg-gradient);
            border: none;
            border-radius: var(--border-radius-sm);
            padding: 14px 28px;
            font-weight: 600;
            font-size: 0.95rem;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            position: relative;
            overflow: hidden;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .btn-primary:hover::before {
            left: 100%;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-medium);
        }

        .btn-primary:active {
            transform: translateY(-1px);
        }

        .btn-outline-primary {
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
            background: transparent;
            border-radius: var(--border-radius-sm);
            padding: 12px 28px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-outline-primary:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
        }

        .section-title {
            font-size: 2rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 2rem;
            color: white;
            text-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .hidden {
            display: none;
        }

        /* Section styling */
        section:not(#home):not(#features) {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            margin: 20px;
            border-radius: var(--border-radius);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Garden flowers */
        #garden {
            min-height: 120px;
            background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
            border-radius: var(--border-radius-sm);
            padding: 20px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 12px;
        }

        /* Challenge styling */
        .challenge-item {
            background: #f8f9fa;
            border-radius: var(--border-radius-sm);
            padding: 20px;
            margin: 12px 0;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
            position: relative;
        }

        .challenge-item.completed {
            background: #d4edda;
            border-color: var(--success-color);
        }

        .challenge-checkbox {
            position: absolute;
            right: 20px;
            top: 20px;
            width: 24px;
            height: 24px;
            cursor: pointer;
        }

        .challenge-points {
            display: inline-block;
            background: var(--bg-gradient);
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: 8px;
        }

        .weekly-affirmation {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: white;
            padding: 24px;
            border-radius: var(--border-radius);
            text-align: center;
            margin: 20px 0;
            box-shadow: var(--shadow-soft);
        }

        .chart-container {
            background: var(--card-bg);
            border-radius: var(--border-radius-sm);
            padding: 24px;
            margin: 20px 0;
            box-shadow: var(--shadow-soft);
        }

        /* Breathing instruction styling */
        .breathing-instruction {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-radius: var(--border-radius-sm);
            padding: 20px;
            margin: 20px 0;
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
        }

        .breathing-step {
            margin: 8px 0;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .breathing-step:last-child {
            border-bottom: none;
        }

        /* Mobile optimizations */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2rem;
                line-height: 1.3;
            }
            
            .hero-subtitle {
                font-size: 1rem;
            }
            
            .section-title {
                font-size: 1.75rem;
            }
            
            .panic-button {
                width: 56px;
                height: 56px;
                font-size: 1.2rem;
                bottom: 20px;
                right: 20px;
            }

            .feature-card {
                padding: 24px 20px;
                margin: 12px 0;
            }

            .emotion-buttons {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            .stats-container {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .game-canvas {
                height: 250px;
            }

            .breathing-circle {
                width: 150px;
                height: 150px;
                font-size: 1rem;
            }

            section:not(#home):not(#features) {
                margin: 16px;
            }

            .welcome-message, .emotion-tracker, .journal-section, .game-section, .challenge-section {
                padding: 20px 16px;
            }
        }

        @media (max-width: 576px) {
            .container {
                padding: 0 16px;
            }

            .hero-section {
                padding: 100px 0 40px 0;
            }

            .feature-card {
                padding: 20px 16px;
            }

            .btn-primary, .btn-outline-primary {
                padding: 12px 20px;
                font-size: 0.9rem;
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .feature-card {
            animation: fadeInUp 0.6s ease forwards;
        }

        .feature-card:nth-child(1) { animation-delay: 0.1s; }
        .feature-card:nth-child(2) { animation-delay: 0.2s; }
        .feature-card:nth-child(3) { animation-delay: 0.3s; }
        .feature-card:nth-child(4) { animation-delay: 0.4s; }
        .feature-card:nth-child(5) { animation-delay: 0.5s; }
        .feature-card:nth-child(6) { animation-delay: 0.6s; }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#"><i class="fas fa-heart"></i> Sadari.id</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#home">Beranda</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#features">Fitur</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#about">Tentang</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero-section">
        <div class="container">
            <h1 class="hero-title">Selamat Datang di Sadari.id</h1>
            <p class="hero-subtitle">Ruang aman untuk dirimu. Kamu tidak sendirian dalam perjalanan ini.</p>
            
            <div class="welcome-message">
                <h4><i class="fas fa-heart text-danger"></i> Apa yang kamu butuhkan hari ini?</h4>
                <p class="mb-0">Pilih salah satu opsi di bawah ini untuk memulai perjalanan self-compassion mu.</p>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section id="features" class="py-5">
        <div class="container">
            <h2 class="section-title">Fitur Utama</h2>
            
            <div class="row">
                <div class="col-md-6 col-lg-4">
                    <div class="feature-card text-center" onclick="showSection('panic')">
                        <div class="feature-icon">
                            <i class="fas fa-shield-heart"></i>
                        </div>
                        <h4>Saya Sedang Cemas</h4>
                        <p>Butuh bantuan segera? Gunakan fitur penenang darurat kami.</p>
                    </div>
                </div>
                
                <div class="col-md-6 col-lg-4">
                    <div class="feature-card text-center" onclick="showSection('education')">
                        <div class="feature-icon">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <h4>Saya Ingin Belajar</h4>
                        <p>Pelajari tentang self-harm dan cara mengatasinya dengan pendekatan yang empatik.</p>
                    </div>
                </div>
                
                <div class="col-md-6 col-lg-4">
                    <div class="feature-card text-center" onclick="showSection('reflection')">
                        <div class="feature-icon">
                            <i class="fas fa-journal-whills"></i>
                        </div>
                        <h4>Saya Ingin Menulis</h4>
                        <p>Ekspresikan perasaanmu melalui jurnal refleksi dan pelacakan emosi.</p>
                    </div>
                </div>
                
                <div class="col-md-6 col-lg-4">
                    <div class="feature-card text-center" onclick="showSection('games')">
                        <div class="feature-icon">
                            <i class="fas fa-gamepad"></i>
                        </div>
                        <h4>Saya Ingin Tenang</h4>
                        <p>Mainkan game penenang untuk distraksi positif dan relaksasi.</p>
                    </div>
                </div>
                
                <div class="col-md-6 col-lg-4">
                    <div class="feature-card text-center" onclick="showSection('gallery')">
                        <div class="feature-icon">
                            <i class="fas fa-palette"></i>
                        </div>
                        <h4>Galeri Healing</h4>
                        <p>Jelajahi konten positif dan inspiratif dari komunitas.</p>
                    </div>
                </div>
                
                <div class="col-md-6 col-lg-4">
                    <div class="feature-card text-center" onclick="showSection('stats')">
                        <div class="feature-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <h4>Statistik Emosi</h4>
                        <p>Pantau perkembangan emosionalmu dengan visualisasi yang mudah dipahami.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Panic Button Content -->
    <section id="panic-section" class="py-5 hidden">
        <div class="container">
            <h2 class="section-title">Penenang Darurat</h2>
            
            <div class="row">
                <div class="col-md-6">
                    <div class="feature-card text-center">
                        <h4><i class="fas fa-music"></i> Audio Relaksasi</h4>
                        <p>Dengarkan suara yang menenangkan</p>
                        <button class="btn btn-primary" onclick="playAudio('rain')">
                            <i class="fas fa-play"></i> Suara Hujan
                        </button>
                        <button class="btn btn-primary ms-2" onclick="playAudio('ocean')">
                            <i class="fas fa-play"></i> Suara Ombak
                        </button>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="feature-card text-center">
                        <h4><i class="fas fa-lungs"></i> Panduan Napas 4-7-8</h4>
                        <div class="breathing-circle" id="breathingCircle">
                            Siap untuk bernapas
                        </div>
                        <button class="btn btn-primary" onclick="startBreathing478()">
                            <i class="fas fa-play"></i> Mulai Latihan Napas
                        </button>
                    </div>
                </div>
            </div>

            <div class="breathing-instruction">
                <h5><i class="fas fa-info-circle"></i> Teknik Pernapasan 4-7-8</h5>
                <div class="breathing-step">1. <strong>Tarik napas lewat hidung selama 4 detik</strong> - Rasakan udara mengisi perut, bukan hanya dada</div>
                <div class="breathing-step">2. <strong>Tahan napas selama 7 detik</strong></div>
                <div class="breathing-step">3. <strong>Buang napas perlahan lewat mulut selama 8 detik</strong> - Bayangkan kelelahanmu ikut keluar</div>
                <div class="breathing-step">4. <strong>Ulangi 2-3 kali</strong> atau sampai merasa lebih tenang</div>
            </div>
            
            <div class="affirmation-card" id="affirmationCard">
                <h4><i class="fas fa-heart"></i> Afirmasi Positif</h4>
                <p id="affirmationText">Kamu berharga dan layak mendapatkan kebahagiaan. Emosi yang kamu rasakan saat ini adalah sementara.</p>
                <button class="btn btn-light" onclick="showNewAffirmation()">
                    <i class="fas fa-refresh"></i> Afirmasi Baru
                </button>
            </div>
        </div>
    </section>

    <!-- Education Section -->
    <section id="education-section" class="py-5 hidden">
        <div class="container">
            <h2 class="section-title">Edukasi Self-Harm</h2>
            
            <div class="row">
                <div class="col-md-4">
                    <div class="feature-card">
                        <h4><i class="fas fa-info-circle"></i> Memahami Self-Harm</h4>
                        <p>Self-harm adalah cara seseorang mengekspresikan atau mengatasi perasaan yang sulit. Ini bukan solusi jangka panjang, tapi ada cara yang lebih sehat untuk menghadapi emosi.</p>
                    </div>
                </div>
                
                <div class="col-md-4">
                    <div class="feature-card">
                        <h4><i class="fas fa-lightbulb"></i> Alternatif Sehat</h4>
                        <p>Coba teknik seperti: menulis jurnal, olahraga ringan, berbicara dengan teman, mendengarkan musik, atau melakukan aktivitas kreatif.</p>
                    </div>
                </div>
                
                <div class="col-md-4">
                    <div class="feature-card">
                        <h4><i class="fas fa-hands-helping"></i> Kapan Mencari Bantuan</h4>
                        <p>Jika kamu merasa kewalahan atau pikiran untuk menyakiti diri semakin sering, penting untuk berbicara dengan konselor atau psikolog.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Reflection Section -->
    <section id="reflection-section" class="py-5 hidden">
        <div class="container">
            <h2 class="section-title">Refleksi Diri</h2>
            
            <!-- Weekly Challenge Section -->
            <div class="challenge-section">
                <h4><i class="fas fa-trophy"></i> Tantangan Mingguan Self-Compassion</h4>
                <p>Selesaikan tantangan berikut untuk mendapatkan poin bonus dan memperkuat self-compassion mu!</p>
                <div id="weeklyChallenge"></div>
            </div>
            
            <div class="emotion-tracker">
                <h4><i class="fas fa-heart"></i> Bagaimana perasaanmu hari ini?</h4>
                <div class="emotion-buttons">
                    <button class="emotion-btn" onclick="selectEmotion(this, 'bahagia', 3)">😊 Bahagia</button>
                    <button class="emotion-btn" onclick="selectEmotion(this, 'sedih', -2)">😢 Sedih</button>
                    <button class="emotion-btn" onclick="selectEmotion(this, 'marah', -2)">😠 Marah</button>
                    <button class="emotion-btn" onclick="selectEmotion(this, 'cemas', -2)">😰 Cemas</button>
                    <button class="emotion-btn" onclick="selectEmotion(this, 'bingung', -1)">😕 Bingung</button>
                    <button class="emotion-btn" onclick="selectEmotion(this, 'lelah', -1)">😴 Lelah</button>
                </div>
                <button class="btn btn-primary" onclick="saveEmotion()">
                    <i class="fas fa-save"></i> Simpan Perasaan
                </button>
            </div>
            
            <div class="journal-section">
                <h4><i class="fas fa-pen"></i> Jurnal Harian</h4>
                <p>Tulis apa yang ada di pikiranmu. Ini adalah ruang yang aman untukmu.</p>
                <textarea class="journal-textarea" placeholder="Ceritakan tentang harimu, perasaanmu, atau hal apa pun yang ingin kamu ungkapkan..."></textarea>
                <div class="mt-3">
                    <button class="btn btn-primary" onclick="saveJournal()">
                        <i class="fas fa-save"></i> Simpan Jurnal
                    </button>
                    <button class="btn btn-outline-primary ms-2" onclick="clearJournal()">
                        <i class="fas fa-eraser"></i> Hapus
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Games Section -->
    <section id="games-section" class="py-5 hidden">
        <div class="container">
            <h2 class="section-title">Game Penenang</h2>
            
            <div class="game-section">
                <h4><i class="fas fa-star"></i> Langit Perasaan</h4>
                <p>Tulis perasaanmu dan lepaskan ke langit malam. Setiap emosi akan berubah menjadi bintang yang indah.</p>
                
                <div class="row">
                    <div class="col-md-4">
                        <input type="text" class="form-control mb-3" id="emotionInput" placeholder="Tulis perasaanmu..." style="border-radius: 15px; padding: 15px;">
                        <button class="btn btn-primary" onclick="releaseEmotion()">
                            <i class="fas fa-paper-plane"></i> Lepaskan ke Langit
                        </button>
                    </div>
                    <div class="col-md-8">
                        <div class="game-canvas" id="skyCanvas">
                            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: #666;">
                                <i class="fas fa-moon" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                                <p>Langit menunggumu untuk berbagi perasaan...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="game-section">
                <h4><i class="fas fa-seedling"></i> Garden of Calm</h4>
                <p>Tanam bunga virtual dan nikmati pesan afirmasi yang muncul.</p>
                <div class="text-center">
                    <button class="btn btn-primary" onclick="plantFlower()">
                        <i class="fas fa-seedling"></i> Tanam Bunga
                    </button>
                    <div id="garden" style="margin-top: 20px; min-height: 100px; display: flex; flex-wrap: wrap; justify-content: center; gap: 10px;">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Gallery Section -->
    <section id="gallery-section" class="py-5 hidden">
        <div class="container">
            <h2 class="section-title">Galeri Healing</h2>
            
            <div class="gallery-grid">
                <div class="gallery-item">
                    <div class="affirmation-card">
                        <h5>"Kamu lebih kuat dari yang kamu kira"</h5>
                        <p>Setiap hari yang kamu lalui adalah bukti kekuatanmu.</p>
                    </div>
                </div>
                
                <div class="gallery-item">
                    <div class="affirmation-card" style="background: linear-gradient(45deg, #98d8c8, #a8dadc);">
                        <h5>"Healing is not linear"</h5>
                        <p>Proses penyembuhan tidak selalu lurus. Naik turun adalah bagian dari perjalanan.</p>
                    </div>
                </div>
                
                <div class="gallery-item">
                    <div class="affirmation-card" style="background: linear-gradient(45deg, #ff9a9e, #fecfef);">
                        <h5>"You are enough"</h5>
                        <p>Kamu sudah cukup, apa adanya. Tidak perlu menjadi sempurna.</p>
                    </div>
                </div>
                
                <div class="gallery-item">
                    <div class="affirmation-card" style="background: linear-gradient(45deg, #a8edea, #fed6e3);">
                        <h5>"Breathe and let go"</h5>
                        <p>Bernapas dalam-dalam dan lepaskan apa yang tidak bisa kamu kontrol.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section id="stats-section" class="py-5 hidden">
        <div class="container">
            <h2 class="section-title">Statistik Emosi</h2>
            
            <!-- Weekly Affirmation -->
            <div class="weekly-affirmation" id="weeklyAffirmation">
                <h4><i class="fas fa-star"></i> Afirmasi Mingguan</h4>
                <p id="weeklyAffirmationText">Loading...</p>
                <div class="mt-3">
                    <strong>Total Poin Minggu Ini: <span id="weeklyPoints">0</span></strong>
                </div>
            </div>

            <!-- Daily Points Chart -->
            <div class="chart-container">
                <h4><i class="fas fa-chart-line"></i> Grafik Mood Minggu Ini (Senin - Minggu)</h4>
                <p class="text-muted mb-3">
                    <i class="fas fa-info-circle"></i> 
                    Grafik akan naik-turun sesuai mood harianmu. 
                    <span style="color: #4ecdc4;">●</span> Baik (+2/+3), 
                    <span style="color: #feca57;">●</span> Netral (0/+1), 
                    <span style="color: #ff9f43;">●</span> Agak Buruk (-1), 
                    <span style="color: #ff6b6b;">●</span> Buruk (-2)
                </p>
                <canvas id="dailyPointsChart" width="400" height="200"></canvas>
            </div>
            
            <div class="stats-container">
                <div class="stat-card">
                    <div class="stat-number" id="happyDays">0</div>
                    <p>Hari Bahagia</p>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="journalEntries">0</div>
                    <p>Jurnal Tertulis</p>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="breathingSessions">0</div>
                    <p>Sesi Napas</p>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="starsReleased">0</div>
                    <p>Bintang Dilepaskan</p>
                </div>
            </div>
            
            <div class="feature-card">
                <h4><i class="fas fa-chart-pie"></i> Ringkasan Minggu Ini</h4>
                <p>Emosi yang paling sering kamu rasakan minggu ini: <span id="dominantEmotion" class="fw-bold">Tenang</span></p>
                <p>Kamu telah menggunakan fitur penenang <span id="calmingUsage" class="fw-bold">3 kali</span> minggu ini. Hebat!</p>
            </div>
        </div>
    </section>

    <!-- Panic Button -->
    <button class="panic-button" onclick="quickPanic()" title="Bantuan Darurat">
        <i class="fas fa-heart"></i>
    </button>

    <!-- Panic Modal -->
    <div class="modal fade" id="panicModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="fas fa-heart"></i> Kamu Tidak Sendirian</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body text-center">
                    <p class="mb-4">Tarik napas dalam-dalam. Kamu aman sekarang.</p>
                    <div class="breathing-circle" id="modalBreathingCircle">
                        Tarik Napas
                    </div>
                    <div class="affirmation-card">
                        <p>Perasaan ini akan berlalu. Kamu memiliki kekuatan untuk melewati ini.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Data storage
        let emotionData = JSON.parse(localStorage.getItem('emotionData')) || {};
        let dailyPoints = JSON.parse(localStorage.getItem('dailyPoints')) || {};
        let weeklyProgress = JSON.parse(localStorage.getItem('weeklyProgress')) || {};
        let journalEntries = JSON.parse(localStorage.getItem('journalEntries')) || [];
        let completedChallenges = JSON.parse(localStorage.getItem('completedChallenges')) || {};
        let stats = JSON.parse(localStorage.getItem('stats')) || {
            happyDays: 0,
            journalEntries: 0,
            breathingSessions: 0,
            starsReleased: 0
        };

        // Weekly challenges bank
        const challengeBank = [
            "Tulis 3 hal yang kamu hargai dari dirimu hari ini",
            "Ucapkan \"Aku layak dicintai\" 3 kali dengan tulus",
            "Lakukan napas dalam selama 1 menit sambil menenangkan pikiran",
            "Tuliskan 1 hal yang membuatmu bangga minggu ini, sekecil apa pun",
            "Beri dirimu waktu 15 menit untuk melakukan hal yang kamu sukai",
            "Peluk dirimu sendiri selama 10 detik sambil menarik napas pelan",
            "Maafkan diri sendiri atas 1 hal yang kamu sesali hari ini",
            "Tuliskan 1 kalimat dukungan seolah kamu menasihati sahabatmu",
            "Ingatkan diri bahwa \"Aku manusia, wajar jika melakukan kesalahan\"",
            "Nikmati 1 makanan/minuman favoritmu tanpa rasa bersalah",
            "Jeda 5 menit untuk hanya duduk tenang tanpa memikirkan apa pun",
            "Sebutkan 3 kekuatan atau kelebihan yang kamu punya",
            "Menatap cermin dan tersenyum pada diri sendiri",
            "Lakukan gerakan peregangan sambil berterima kasih pada tubuhmu",
            "Tulis surat singkat berisi kata-kata lembut untuk dirimu di masa sulit"
        ];

        // Garden of Calm affirmations
        const gardenAffirmations = [
            "Perasaanmu valid, sekecil apa pun itu",
            "Ketenangan bukan tujuan akhir, tapi hak setiap hari",
            "Tidak semua hari harus produktif",
            "Kamu boleh berkata, \"Aku butuh waktu.\"",
            "Hidup tidak harus sempurna untuk bisa disyukuri",
            "Kesedihan tidak membuatmu lemah",
            "Kamu pantas mendapatkan hal-hal baik",
            "Berdiam bukan berarti mundur",
            "Kebaikan kecil yang kamu lakukan tetap berarti",
            "Kamu berhak merasa cukup dengan dirimu sendiri",
            "Kamu tidak harus menjelaskan semua hal kepada semua orang",
            "Memaafkan diri sendiri juga bentuk keberanian",
            "Kamu boleh tidak baik-baik saja hari ini",
            "Tidak semua hal harus kamu tanggung sendirian",
            "Hanya karena kamu terjatuh, bukan berarti kamu gagal",
            "Mengambil jeda juga bagian dari bertumbuh",
            "Apa yang kamu rasakan hari ini tidak akan selamanya",
            "Kamu tetap berharga, bahkan di saat terburukmu",
            "Kesembuhan bukan garis lurus, dan itu tidak apa-apa"
        ];

        // Weekly affirmations by category
        const weeklyAffirmations = {
            crisis: [
                "Minggu ini mungkin terasa sangat berat bagimu, tapi ingat, setiap badai pasti berlalu. Kamu masih punya kesempatan untuk memulai kembali besok.",
                "Tidak apa-apa jika minggu ini penuh air mata dan rasa lelah. Yang penting kamu tetap bernapas dan bertahan sejauh ini.",
                "Kamu berharga, bahkan ketika perasaanmu kacau. Jangan lupakan bahwa ada orang yang peduli padamu."
            ],
            struggling: [
                "Perlahan saja, kamu tidak perlu terburu-buru untuk merasa lebih baik. Pemulihan membutuhkan waktu, dan itu wajar.",
                "Kamu sudah melakukan yang terbaik yang kamu bisa di minggu ini, dan itu adalah sesuatu yang patut kamu syukuri.",
                "Istirahatlah sejenak, lepaskan beban, lalu lanjutkan langkah kecilmu ke depan."
            ],
            improving: [
                "Mungkin minggu ini belum sesuai harapan, tapi perjalananmu belum selesai. Masih banyak kesempatan untuk memperbaikinya.",
                "Rayakan setiap kemajuan kecil, karena dari langkah kecil itulah lahir perubahan besar.",
                "Sedikit demi sedikit, energi positif akan kembali padamu jika kamu terus mencoba."
            ],
            stable: [
                "Kamu berhasil melewati minggu ini meski penuh tantangan, itu membuktikan ketangguhanmu.",
                "Tidak perlu selalu sempurna, yang terpenting kamu tetap mencoba dan tidak menyerah.",
                "Lanjutkan langkah ini, karena kamu sedang membangun kekuatan yang luar biasa di dalam dirimu."
            ],
            balanced: [
                "Kamu sudah cukup baik menyeimbangkan berbagai perasaan minggu ini. Itu tanda kamu mulai mengendalikan emosimu dengan baik.",
                "Lihatlah, kamu mampu menjaga energi positif meski ada rintangan di tengah jalan.",
                "Pertahankan semangat ini, karena sedikit demi sedikit kamu sedang membentuk versi dirimu yang lebih kuat."
            ],
            healthy: [
                "Kamu berada di jalur yang bagus untuk menjaga kesehatan emosimu. Minggu ini penuh usaha yang patut diapresiasi.",
                "Keseimbangan yang kamu bangun sangat berarti. Itu menunjukkan kedewasaan dalam menghadapi hidup.",
                "Hebat! Minggu ini kamu telah banyak menjaga suasana hati tetap positif, dan itu berdampak baik untuk dirimu."
            ],
            thriving: [
                "Energi positifmu luar biasa minggu ini, teruskan! Kamu menjadi bukti bahwa hati yang dijaga akan membawa ketenangan.",
                "Kamu telah membawa banyak kebahagiaan untuk dirimu sendiri dan mungkin juga untuk orang di sekitarmu.",
                "Minggu ini penuh warna cerah berkat usahamu menjaga hati tetap bahagia dan pikiran tetap jernih."
            ],
            radiant: [
                "Sempurna! Minggu ini kamu benar-benar bersinar dan memancarkan energi positif ke mana pun kamu pergi.",
                "Kebahagiaanmu begitu menular, membuat orang di sekitarmu ikut merasakan kehangatan dan semangatmu.",
                "Kamu adalah bukti nyata bahwa pikiran positif mampu mengubah hari-hari menjadi luar biasa."
            ]
        };

        // Standard affirmations
        const affirmations = [
            "Kamu berharga dan layak mendapatkan kebahagiaan.",
            "Emosi yang kamu rasakan saat ini adalah sementara.",
            "Kamu memiliki kekuatan untuk melewati ini.",
            "Setiap hari adalah kesempatan baru untuk memulai.",
            "Kamu tidak sendirian dalam perjalanan ini.",
            "Healing membutuhkan waktu, dan itu tidak apa-apa.",
            "Kamu sudah cukup, apa adanya.",
            "Perasaanmu valid dan penting.",
            "Kamu layak mendapatkan cinta dan kebaikan.",
            "Langkah kecil yang kamu ambil hari ini sangat berarti."
        ];

        // Initialize stats display
        document.addEventListener('DOMContentLoaded', function() {
            updateStatsDisplay();
            generateWeeklyChallenges();
            updateWeeklyAffirmation();
            createDailyPointsChart();
        });

        // Navigation functions
        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('section').forEach(section => {
                if (section.id.includes('-section')) {
                    section.classList.add('hidden');
                }
            });
            
            // Show selected section
            const targetSection = document.getElementById(sectionName + '-section');
            if (targetSection) {
                targetSection.classList.remove('hidden');
                targetSection.scrollIntoView({ behavior: 'smooth' });
            }
        }

        // Weekly Challenge Functions
        function generateWeeklyChallenges() {
            const currentWeek = getWeekNumber();
            const challengeContainer = document.getElementById('weeklyChallenge');
            
            if (!weeklyProgress[currentWeek]) {
                // Generate 3 random challenges for this week
                const shuffled = [...challengeBank].sort(() => 0.5 - Math.random());
                weeklyProgress[currentWeek] = {
                    challenges: shuffled.slice(0, 3),
                    completed: []
                };
                localStorage.setItem('weeklyProgress', JSON.stringify(weeklyProgress));
            }
            
            const currentChallenges = weeklyProgress[currentWeek];
            challengeContainer.innerHTML = '';
            
            currentChallenges.challenges.forEach((challenge, index) => {
                const isCompleted = currentChallenges.completed.includes(index);
                const challengeDiv = document.createElement('div');
                challengeDiv.className = `challenge-item ${isCompleted ? 'completed' : ''}`;
                challengeDiv.innerHTML = `
                    <h6>${challenge}</h6>
                    <span class="challenge-points">+1 poin</span>
                    <input type="checkbox" class="challenge-checkbox" 
                           ${isCompleted ? 'checked' : ''} 
                           onchange="toggleChallenge(${index})"
                           ${isCompleted ? 'disabled' : ''}>
                `;
                challengeContainer.appendChild(challengeDiv);
            });
        }

        function toggleChallenge(challengeIndex) {
            const currentWeek = getWeekNumber();
            if (!weeklyProgress[currentWeek].completed.includes(challengeIndex)) {
                weeklyProgress[currentWeek].completed.push(challengeIndex);
                localStorage.setItem('weeklyProgress', JSON.stringify(weeklyProgress));
                generateWeeklyChallenges();
                updateWeeklyAffirmation();
                createDailyPointsChart();
                showNotification('Tantangan selesai! +1 poin bonus untuk kamu 🎉');
            }
        }

        function getWeekNumber() {
            const now = new Date();
            const start = new Date(now.getFullYear(), 0, 1);
            const diff = now - start;
            const oneWeek = 1000 * 60 * 60 * 24 * 7;
            return Math.floor(diff / oneWeek);
        }

        // Points calculation functions
        function calculateWeeklyPoints() {
            const currentWeek = getWeekNumber();
            const weekDates = getCurrentWeekDates(); // Menggunakan Senin-Minggu
            let totalPoints = 0;
            
            // Calculate daily emotion points untuk minggu ini
            weekDates.forEach(date => {
                if (dailyPoints[date]) {
                    totalPoints += dailyPoints[date];
                }
            });
            
            // Add challenge bonus points
            if (weeklyProgress[currentWeek]) {
                totalPoints += weeklyProgress[currentWeek].completed.length;
            }
            
            return totalPoints;
        }

        function getEmotionCategory(points) {
            if (points >= -14 && points <= -11) return 'crisis';
            if (points >= -10 && points <= -5) return 'struggling';
            if (points >= -4 && points <= -1) return 'improving';
            if (points >= 1 && points <= 5) return 'stable';
            if (points >= 6 && points <= 9) return 'balanced';
            if (points >= 10 && points <= 15) return 'healthy';
            if (points >= 16 && points <= 20) return 'thriving';
            if (points >= 21 && points <= 24) return 'radiant';
            return 'stable'; // default
        }

        function updateWeeklyAffirmation() {
            const weeklyPoints = calculateWeeklyPoints();
            const category = getEmotionCategory(weeklyPoints);
            const categoryAffirmations = weeklyAffirmations[category];
            const randomAffirmation = categoryAffirmations[Math.floor(Math.random() * categoryAffirmations.length)];
            
            document.getElementById('weeklyAffirmationText').textContent = randomAffirmation;
            document.getElementById('weeklyPoints').textContent = weeklyPoints;
        }

        function getCurrentWeekDates() {
            const today = new Date();
            const currentDay = today.getDay(); // 0 = Minggu, 1 = Senin, dst
            const monday = new Date(today);
            
            // Hitung hari Senin minggu ini
            const daysFromMonday = currentDay === 0 ? 6 : currentDay - 1; // Jika hari Minggu, mundur 6 hari
            monday.setDate(today.getDate() - daysFromMonday);
            
            const weekDates = [];
            for (let i = 0; i < 7; i++) {
                const date = new Date(monday);
                date.setDate(monday.getDate() + i);
                weekDates.push(date.toDateString());
            }
            return weekDates;
        }

        function createDailyPointsChart() {
            const ctx = document.getElementById('dailyPointsChart').getContext('2d');
            
            // Hancurkan chart yang ada jika ada
            if (window.dailyChart) {
                window.dailyChart.destroy();
            }
            
            const weekDates = getCurrentWeekDates();
            const labels = ['Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu', 'Minggu'];
            const data = weekDates.map(date => dailyPoints[date] || 0);
            
            // Buat warna titik berdasarkan nilai poin
            const pointColors = data.map(point => {
                if (point >= 2) return '#4ecdc4'; // Hijau untuk mood baik
                if (point >= 0) return '#feca57'; // Kuning untuk netral
                if (point >= -1) return '#ff9f43'; // Orange untuk agak buruk
                return '#ff6b6b'; // Merah untuk mood buruk
            });
            
            window.dailyChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Poin Mood Harian',
                        data: data,
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: pointColors,
                        pointBorderColor: pointColors,
                        pointRadius: 6,
                        pointHoverRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: true
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const point = context.parsed.y;
                                    let mood = '';
                                    if (point >= 2) mood = '😊 Mood Baik';
                                    else if (point >= 0) mood = '😐 Mood Netral';
                                    else if (point >= -1) mood = '😔 Agak Sedih';
                                    else mood = '😢 Mood Buruk';
                                    
                                    return `${mood} (${point > 0 ? '+' : ''}${point} poin)`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            min: -3,
                            max: 4,
                            ticks: {
                                callback: function(value) {
                                    if (value >= 2) return '😊 +' + value;
                                    if (value >= 0) return '😐 ' + value;
                                    if (value >= -1) return '😔 ' + value;
                                    return '😢 ' + value;
                                }
                            }
                        }
                    }
                }
            });
        }

        // Panic button functions
        function quickPanic() {
            const modal = new bootstrap.Modal(document.getElementById('panicModal'));
            modal.show();
            startModalBreathing();
        }

        function startBreathing478() {
            const circle = document.getElementById('breathingCircle');
            const steps = [
                { text: 'Siap...', duration: 1000 },
                { text: 'Tarik Napas (4)', duration: 4000 },
                { text: 'Tahan (7)', duration: 7000 },
                { text: 'Buang Napas (8)', duration: 8000 }
            ];
            
            stats.breathingSessions++;
            updateStatsDisplay();
            saveStats();
            
            let currentStep = 0;
            
            function executeStep() {
                if (currentStep < steps.length) {
                    circle.textContent = steps[currentStep].text;
                    setTimeout(() => {
                        currentStep++;
                        if (currentStep < steps.length) {
                            executeStep();
                        } else {
                            // Repeat cycle 3 times
                            if (currentStep < steps.length * 3) {
                                currentStep = 1; // Skip "Siap..." for subsequent cycles
                                executeStep();
                            } else {
                                circle.textContent = 'Selesai 💫';
                                showNotification('Latihan napas 4-7-8 selesai. Kamu hebat!');
                            }
                        }
                    }, steps[currentStep].duration);
                }
            }
            
            executeStep();
        }

        function startModalBreathing() {
            const circle = document.getElementById('modalBreathingCircle');
            const texts = ['Tarik Napas', 'Tahan', 'Buang Napas', 'Tahan'];
            let currentIndex = 0;
            
            const breathingInterval = setInterval(() => {
                circle.textContent = texts[currentIndex];
                currentIndex = (currentIndex + 1) % texts.length;
            }, 2000);
            
            setTimeout(() => {
                clearInterval(breathingInterval);
                circle.textContent = 'Lebih Baik';
            }, 12000);
        }

        // Affirmation functions
        function showNewAffirmation() {
            const randomAffirmation = affirmations[Math.floor(Math.random() * affirmations.length)];
            document.getElementById('affirmationText').textContent = randomAffirmation;
        }

        // Audio functions
        function playAudio(type) {
            showNotification(`Memutar audio ${type === 'rain' ? 'hujan' : 'ombak'}...`);
            setTimeout(() => {
                showNotification('Audio selesai diputar. Semoga kamu merasa lebih tenang.');
            }, 3000);
        }

        // Emotion tracking functions
        let selectedEmotion = '';
        let selectedPoints = 0;

        function selectEmotion(button, emotion, points) {
            document.querySelectorAll('.emotion-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            button.classList.add('active');
            selectedEmotion = emotion;
            selectedPoints = points;
        }

        function saveEmotion() {
            if (!selectedEmotion) {
                showNotification('Pilih salah satu emosi terlebih dahulu.');
                return;
            }
            
            const today = new Date().toDateString();
            emotionData[today] = selectedEmotion;
            dailyPoints[today] = selectedPoints;
            
            if (selectedEmotion === 'bahagia') {
                stats.happyDays++;
            }
            
            localStorage.setItem('emotionData', JSON.stringify(emotionData));
            localStorage.setItem('dailyPoints', JSON.stringify(dailyPoints));
            updateStatsDisplay();
            updateWeeklyAffirmation();
            createDailyPointsChart();
            saveStats();
            
            showNotification(`Perasaan "${selectedEmotion}" telah disimpan dengan ${selectedPoints > 0 ? '+' : ''}${selectedPoints} poin.`);
            
            // Reset selection
            document.querySelectorAll('.emotion-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            selectedEmotion = '';
            selectedPoints = 0;
        }

        // Journal functions
        function saveJournal() {
            const journalText = document.querySelector('.journal-textarea').value.trim();
            
            if (!journalText) {
                showNotification('Tulis sesuatu di jurnal terlebih dahulu.');
                return;
            }
            
            const entry = {
                date: new Date().toLocaleString('id-ID'),
                text: journalText
            };
            
            journalEntries.push(entry);
            stats.journalEntries++;
            
            localStorage.setItem('journalEntries', JSON.stringify(journalEntries));
            updateStatsDisplay();
            saveStats();
            
            showNotification('Jurnal berhasil disimpan. Terima kasih sudah berbagi perasaanmu.');
            document.querySelector('.journal-textarea').value = '';
        }

        function clearJournal() {
            document.querySelector('.journal-textarea').value = '';
            showNotification('Jurnal telah dibersihkan.');
        }

        // Game functions
        function releaseEmotion() {
            const emotionInput = document.getElementById('emotionInput');
            const emotionText = emotionInput.value.trim();
            
            if (!emotionText) {
                showNotification('Tulis perasaanmu terlebih dahulu.');
                return;
            }
            
            createStar(emotionText);
            emotionInput.value = '';
            stats.starsReleased++;
            updateStatsDisplay();
            saveStats();
            
            showNotification('Emosimu valid. Kamu hebat sudah menghadapinya.');
        }

        function createStar(emotionText) {
            const canvas = document.getElementById('skyCanvas');
            const star = document.createElement('div');
            
            // Random position
            const x = Math.random() * (canvas.offsetWidth - 50);
            const y = Math.random() * (canvas.offsetHeight - 50);
            
            // Random color based on emotion
            const colors = ['#ffd700', '#87ceeb', '#dda0dd', '#98fb98', '#f0e68c'];
            const color = colors[Math.floor(Math.random() * colors.length)];
            
            star.className = 'floating-star';
            star.innerHTML = '⭐';
            star.style.left = x + 'px';
            star.style.top = y + 'px';
            star.style.color = color;
            star.style.fontSize = '1.5rem';
            star.title = emotionText;
            
            star.addEventListener('click', () => {
                showNotification(`Emosi: "${emotionText}"`);
            });
            
            canvas.appendChild(star);
            
            // Remove empty state message
            const emptyMessage = canvas.querySelector('div[style*="position: absolute"]');
            if (emptyMessage) {
                emptyMessage.remove();
            }
        }

        function plantFlower() {
            const garden = document.getElementById('garden');
            const flower = document.createElement('div');
            
            const flowers = ['🌸', '🌺', '🌻', '🌷', '🌹', '🌼'];
            const randomFlower = flowers[Math.floor(Math.random() * flowers.length)];
            const randomMessage = gardenAffirmations[Math.floor(Math.random() * gardenAffirmations.length)];
            
            flower.style.fontSize = '2rem';
            flower.style.cursor = 'pointer';
            flower.style.transition = 'transform 0.3s ease';
            flower.textContent = randomFlower;
            flower.title = randomMessage;
            
            flower.addEventListener('click', () => {
                showNotification(randomMessage);
            });
            
            flower.addEventListener('mouseenter', () => {
                flower.style.transform = 'scale(1.2)';
            });
            
            flower.addEventListener('mouseleave', () => {
                flower.style.transform = 'scale(1)';
            });
            
            garden.appendChild(flower);
            showNotification('Bunga berhasil ditanam! Klik bunga untuk melihat pesan afirmasi.');
        }

        // Stats functions
        function updateStatsDisplay() {
            document.getElementById('happyDays').textContent = stats.happyDays;
            document.getElementById('journalEntries').textContent = stats.journalEntries;
            document.getElementById('breathingSessions').textContent = stats.breathingSessions;
            document.getElementById('starsReleased').textContent = stats.starsReleased;
        }

        function saveStats() {
            localStorage.setItem('stats', JSON.stringify(stats));
        }

        // Notification function
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
                color: white;
                padding: 15px 20px;
                border-radius: 15px;
                box-shadow: 0 4px 20px rgba(0,0,0,0.2);
                z-index: 1001;
                max-width: 300px;
                animation: slideIn 0.3s ease;
            `;
            
            notification.innerHTML = `
                <i class="fas fa-check-circle me-2"></i>
                ${message}
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Add CSS animations for notifications
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            updateStatsDisplay();
            generateWeeklyChallenges();
            updateWeeklyAffirmation();
            
            setTimeout(() => {
                showNotification('Selamat datang di Sadari.id! Kamu tidak sendirian.');
            }, 1000);
        });
    </script>
</body>
</html>
